<!DOCTYPE html>
<html>
<head>
	<title>Calculator</title>
</head>

<style type="text/css">
	#calc{
		text-align: right;
	}
	input {
		width: 100%;
		background-color: white;
	}
</style>
<script type="text/javascript">

	window.onload = () => {
		document.getElementById("calc").value = 0
	}
	let func = (char) => {
		if (document.getElementById("calc").value.length == 1 && document.getElementById("calc").value[0] == '0')
			return document.getElementById("calc").value = char
		document.getElementById("calc").value+=char
	}
	let clearr = () => {
		document.getElementById("calc").value = '0';
	}
	let back = () => {
		if(document.getElementById("calc").value.length == 1)
			return document.getElementById("calc").value = 0
		document.getElementById("calc").value = document.getElementById("calc").value.slice(0,-1)
	}
	let calc = (expr) => {
		let opr1='',opr2='',op=1
		for (var i = expr.length - 1; i >= 0; i--) {
			if(expr[i] == '+'){
				op = 2
			}
			else if(op == 1)
				opr1+=expr[i]
			else
				opr2+=expr[i]
		}
		console.log(opr1,opr2)
		return leval(expr)
		return ''+(parseInt(opr1)+parseInt(opr2))
	}
	let evaluatee = () => {
		let x = document.getElementById("calc").value.split('^').join('**')
		console.log(x)
		
		try{
			document.getElementById("calc").value  = calc(x)
		}
		catch(err)
		{
			alert('Invalid Expression')
		}
	}
	let leval = (e) => {
		return eval(e)
	}
</script>
<body>

	<center>
		<h1>Calculator</h1>
	<table border="1px" margin-top="10%">
		<tr>
			<td colspan="5"><input type="text" id="calc"></td>
		</tr>
		<tr>
			<td><input type="button" name="" id="1" value="1" onclick="func(1)"></td>
			<td><input type="button" name="" id="2" value="2" onclick="func(2)"></td>
			<td><input type="button" name="" id="3" value="3" onclick="func(3)"></td>
			<td><input type="button" name="" id="+" value="+" onclick="func('+')"></td>
		</tr>
		<tr>
			<td><input type="button" name="" id="4" value="4" onclick="func(4)"></td>
			<td><input type="button" name="" id="5" value="5" onclick="func(5)"></td>
			<td><input type="button" name="" id="6" value="6" onclick="func(6)"></td>
			<td><input type="button" name="" id="-" value="-" onclick="func('-')"></td>
		</tr>
		<tr>
			<td><input type="button" name="" id="7" value="7" onclick="func(7)"></td>
			<td><input type="button" name="" id="8" value="8" onclick="func(8)"></td>
			<td><input type="button" name="" id="9" value="9" onclick="func(9)"></td>
			<td><input type="button" name="" id="*" value="*" onclick="func('*')"></td>
		</tr>
		<tr>
			<td><input type="button" name="" id="." value="." onclick="func('.')"></td>
			<td><input type="button" name="" id="0" value="0" onclick="func(0)"></td>
			<td><input type="button" name="" id="AC" value="AC" onclick="clearr()"></td>
			<td><input type="button" name="" id="C" value="C" onclick="back()"></td>
		</tr>
		<tr>
			<td><input type="button" name="" id="(" value="(" onclick="func('(')"></td>
			<td><input type="button" name="" id=")" value=")" onclick="func(')')"></td>
			<td><input type="button" name="" id="^2" value="^2" onclick="func('^2')"></td>
			<td><input type="button" name="" id="sqrt" value="sqrt" onclick="func('^0.5')"></td>
		</tr>
		<tr>

			<td colspan="3"><input type="button" name="" id="=" value="=" onclick="evaluatee()"></td>
			<td><input type="button" name="" id="/" value="/" onclick="func('/')"></td>
		</tr>
	</table>
	</center>


</body>
</html>