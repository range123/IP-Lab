<!DOCTYPE html>
<html>
<head>
	<title>Form Validation</title>
</head> 
<style type="text/css">

 input:required:invalid, input:focus:invalid {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAeVJREFUeNqkU01oE1EQ/mazSTdRmqSxLVSJVKU9RYoHD8WfHr16kh5EFA8eSy6hXrwUPBSKZ6E9V1CU4tGf0DZWDEQrGkhprRDbCvlpavan3ezu+LLSUnADLZnHwHvzmJlvvpkhZkY7IqFNaTuAfPhhP/8Uo87SGSaDsP27hgYM/lUpy6lHdqsAtM+BPfvqKp3ufYKwcgmWCug6oKmrrG3PoaqngWjdd/922hOBs5C/jJA6x7AiUt8VYVUAVQXXShfIqCYRMZO8/N1N+B8H1sOUwivpSUSVCJ2MAjtVwBAIdv+AQkHQqbOgc+fBvorjyQENDcch16/BtkQdAlC4E6jrYHGgGU18Io3gmhzJuwub6/fQJYNi/YBpCifhbDaAPXFvCBVxXbvfbNGFeN8DkjogWAd8DljV3KRutcEAeHMN/HXZ4p9bhncJHCyhNx52R0Kv/XNuQvYBnM+CP7xddXL5KaJw0TMAF8qjnMvegeK/SLHubhpKDKIrJDlvXoMX3y9xcSMZyBQ+tpyk5hzsa2Ns7LGdfWdbL6fZvHn92d7dgROH/730YBLtiZmEdGPkFnhX4kxmjVe2xgPfCtrRd6GHRtEh9zsL8xVe+pwSzj+OtwvletZZ/wLeKD71L+ZeHHWZ/gowABkp7AwwnEjFAAAAAElFTkSuQmCC);
    background-position: right top;
    background-repeat: no-repeat;
    -moz-box-shadow: none;
  }
  input:required:valid {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAepJREFUeNrEk79PFEEUx9/uDDd7v/AAQQnEQokmJCRGwc7/QeM/YGVxsZJQYI/EhCChICYmUJigNBSGzobQaI5SaYRw6imne0d2D/bYmZ3dGd+YQKEHYiyc5GUyb3Y+77vfeWNpreFfhvXfAWAAJtbKi7dff1rWK9vPHx3mThP2Iaipk5EzTg8Qmru38H7izmkFHAF4WH1R52654PR0Oamzj2dKxYt/Bbg1OPZuY3d9aU82VGem/5LtnJscLxWzfzRxaWNqWJP0XUadIbSzu5DuvUJpzq7sfYBKsP1GJeLB+PWpt8cCXm4+2+zLXx4guKiLXWA2Nc5ChOuacMEPv20FkT+dIawyenVi5VcAbcigWzXLeNiDRCdwId0LFm5IUMBIBgrp8wOEsFlfeCGm23/zoBZWn9a4C314A1nCoM1OAVccuGyCkPs/P+pIdVIOkG9pIh6YlyqCrwhRKD3GygK9PUBImIQQxRi4b2O+JcCLg8+e8NZiLVEygwCrWpYF0jQJziYU/ho2TUuCPTn8hHcQNuZy1/94sAMOzQHDeqaij7Cd8Dt8CatGhX3iWxgtFW/m29pnUjR7TSQcRCIAVW1FSr6KAVYdi+5Pj8yunviYHq7f72po3Y9dbi7CxzDO1+duzCXH9cEPAQYAhJELY/AqBtwAAAAASUVORK5CYII=);
    background-position: right top;
    background-repeat: no-repeat;
  }

</style>
  
<script type="text/javascript">

	function onfoc() {

	}
	window.onload = function() {
	
	var x = new Date()
	var y = new Date()
	x.setFullYear(x.getFullYear()-18)
	y.setFullYear(y.getFullYear()-35)
	var m1 = (y.getMonth()+1).toString()
	var m2 = (x.getMonth()+1).toString()
	if(m1.length == 1)
		m1 = '0'+m1
	if(m2.length == 1)
		m2 = '0'+m2
	var d1 = x.getDate().toString()
	var d2 = y.getDate().toString()
	if(d1.length == 1)
		d1 = '0'+d1
	if(d2.length == 1)
		d2 = '0'+d2

	
	

	document.getElementById('dob').min = y.getFullYear()+'-'+(m1)+'-'+d2
	document.getElementById('dob').max = x.getFullYear()+'-'+(m2)+'-'+d1
	
	document.getElementById('clear').onclick = function() {
		document.getElementById('name').focus()
	}

	var list = document.getElementsByTagName('input')
	var chk = false;
	console.log(list)
	document.getElementById("rad").onchange= (e) => {
		if(!validateForm())
		{
			chk = false;
			e.target.setCustomValidity('Select one salutation')
		}
		chk = true

	}
	for (let index = 0; index < list.length; index++) {
		const element = list[index];
		element.onclick = ()=>{
				
			document.getElementById('form').reportValidity()
			// if(element.value.length == 0)
			// {
			// document.getElementById(element.id+"label").value = 'Field should not be empty'
			// }

		}
		
	}
	function validateForm() {
		var radios = document.getElementsByName("salutation");
		var formValid = false;

		var i = 0;
		while (!formValid && i < radios.length) {
			if (radios[i].checked) formValid = true;
			i++;        
		}

		// if (!formValid) alert("Must check some option!");
		return formValid;
	}
	function twochkbox() {
		var chkbox = document.getElementsByName('lang')
		var c = 0;
		for(let i=0;i<chkbox.length;i++)
		{
			if(chkbox[i].checked)
				c++
		}
		return c>=2
	}
	document.getElementById('sub').onclick = function(){
		// if(document.getElementById('form').reportValidity())
		// 	{

		// 	}
		if(!validateForm())
			alert('Choose a salutation')
		else if(!twochkbox())
			alert('Choose atleast two Languages')
		else{
			document.getElementById('form').submit()
			alert('Details submitted successfully')
		}
	}
	document.getElementById('name').oninvalid = (e) => {
		e.target.setCustomValidity('Name should be of format Initial.1-3 words')
	}
	document.getElementById('name').oninput = (e) => {
		e.target.setCustomValidity('')
	}
	document.getElementById('username').oninvalid = (e) => {
		e.target.setCustomValidity('Username should contain only alphabets')
	}
	document.getElementById('username').oninput = (e) => {
		e.target.setCustomValidity('')
	}
	document.getElementById('email').oninvalid = (e) => {
		e.target.setCustomValidity('Email should be of form xxx@yy.zz or xyx@yy.yz.zz etc')
	}
	document.getElementById('email').oninput = (e) => {
		e.target.setCustomValidity('')
	}
	document.getElementById('password').oninvalid = (e) => {
		e.target.setCustomValidity('Password should be of min 8 characters with lower, upper, special and number characters')
	}
	document.getElementById('password').oninput = (e) => {
		e.target.setCustomValidity('')
	}
	// document.getElementById('username').oninvalid = (e) => {
	// 	e.target.setCustomValidity('Userame should contain only Alphabets')
	// }

	document.getElementById('others').onchange = function() {
		if(this.checked){
			var inp = document.createElement('input')
			inp.type = "text"
			inp.placeholder = "Enter Other Language"
			inp.required = true
			document.getElementById('othersdiv').appendChild(inp)
		}
		else{

			document.getElementById('othersdiv').removeChild(document.getElementById('othersdiv').lastChild)
		}
	}
	function calculateAge(birthday) { // birthday is a date
	   var ageDifMs = Date.now() - birthday;
	   var ageDate = new Date(ageDifMs); // miliseconds from epoch
	   // console.log(Math.abs(ageDate.getUTCFullYear() - 1970))
	   return Math.abs(ageDate.getUTCFullYear() - 1970)>=18 && Math.abs(ageDate.getUTCFullYear() - 1970)<=35 ;
 }
}
</script>
<body>

	<center>
		<h1>Form</h1>
		<form id="form" action="form" method = "POST">
			<label>Salutation : </label><br>
			<div aria-required="true" id="rad"><input type="radio" name="salutation" value="Mr" >Mr 
				<input type="radio" name="salutation" value = "Mrs">Mrs 
				<input type="radio" name="salutation" value = "Miss">Miss
				<input type="radio" name="salutation" value = "Dr">Dr<br></div>

			<label> Name  </label>
			<input type="text" name="name" id="name" pattern = "([A-Z])[.]([\S]+)\s([\S]+)\s([\S]+)$|([A-Z])[.]([\S]+)\s([\S]+)$|([A-Z])[.]([\S]+)$" required>
			<label id="namelabel"></label>
			<br>
			<label> Username </label>
			<input  id="username" list="usernamelist"  pattern="[a-zA-z]*" name="Username" required> 
			<label id="usernamelabel"></label>
			<br>
			<label> Password </label>
			<input id="password" type="Password" name="Password" pattern="^(?=.{8,})(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[@#$%^&+=]).*$" required placeholder="Enter valid password">
			<label id="passwordlabel"></label>
			<br>
			<label> Email </label>
			<input id="email" type="email" name="Email" pattern="([a-zA-Z0-9]+)@([a-zA-z]+)([.][a-zA-Z]+)+$" required>
			<label id="emaillabel"></label>
			<br>
			<label> Dob </label>
			<input type="date" name="Dob" id="dob" required>
			<label id="doblabel"></label>
			<br>
			<label> Photo </label>
			<input type="file" name="pic" id="pic" accept="image/*" required>
			<label id="piclabel"></label>
			<br>
			<label> Languages Known </label>
			<br>
			<input type="checkbox" name="lang" value="English">English <br>	
			<input type="checkbox" name="lang" value="Tamil">Tamil <br>
			<input type="checkbox" name="lang" value="French">French <br>
			<div id="othersdiv"><input type="checkbox" name="lang" id="others">Others</div>
			
			<br>
			<label> Additional Expertise </label>
			<textarea rows="5" cols="50" id="exp" placeholder="Type your expertise here" name="expertise" required></textarea>
			<label id="explabel"></label>
			<br>
			<br>
			<button type="button" id="sub">Submit</button>
			<!-- <input type="submit" id="sub" name=""> -->
			<input type="reset" name="" id="clear">
		</form>
	</center>
	

	<datalist id="usernamelist">
	  <option value="Superman">
	  <option value="Batman">
</body>
</html>